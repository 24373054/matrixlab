#!/bin/bash

# ========================================
# Matrix Lab - å¯åŠ¨ç®¡ç†åå°
# ========================================

echo "========================================="
echo "  å¯åŠ¨ Matrix Lab ç®¡ç†å‘˜åå°æœåŠ¡"
echo "========================================="
echo ""

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
if systemctl is-active --quiet matrixlab-admin; then
    echo "âš ï¸  ç®¡ç†åå°å·²ç»åœ¨è¿è¡Œä¸­ï¼"
    echo ""
    systemctl status matrixlab-admin --no-pager -l
    exit 0
fi

# å¯åŠ¨æœåŠ¡
echo "ğŸš€ æ­£åœ¨å¯åŠ¨ç®¡ç†åå°æœåŠ¡..."
sudo systemctl start matrixlab-admin

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 2

# æ£€æŸ¥å¯åŠ¨çŠ¶æ€
if systemctl is-active --quiet matrixlab-admin; then
    echo ""
    echo "âœ… ç®¡ç†åå°å¯åŠ¨æˆåŠŸï¼"
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "  ğŸ“Š æœåŠ¡ä¿¡æ¯"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "  ç®¡ç†é¢æ¿: https://matrixlab.work/admin-panel.html"
    echo "  API çŠ¶æ€: https://matrixlab.work/api/health"
    echo ""
    echo "  æŸ¥çœ‹æ—¥å¿—: sudo journalctl -u matrixlab-admin -f"
    echo "  åœæ­¢æœåŠ¡: ./stop"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo ""
else
    echo ""
    echo "âŒ ç®¡ç†åå°å¯åŠ¨å¤±è´¥ï¼"
    echo ""
    echo "æŸ¥çœ‹é”™è¯¯æ—¥å¿—:"
    sudo journalctl -u matrixlab-admin -n 50 --no-pager
fi

